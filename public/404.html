<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Easy To-Do - Redirecting...</title>
    <script type="text/javascript">
      // GitHub Pages SPA ë¼ìš°íŒ…ì„ ìœ„í•œ ë¦¬ë‹¤ì´ë ‰íŠ¸ (ë””ë²„ê¹… ê°•í™” ë²„ì „)
      (function () {
        var l = window.location;
        var ghPagesAppName = "easy-to-do";
        var baseUrl = "/" + ghPagesAppName + "/";

        // ë””ë²„ê¹… ì •ë³´ í‘œì‹œ
        console.log("=== 404.html SPA ë¼ìš°íŒ… ì‹œì‘ ===");
        console.log("404.html - Current location:", l.href);
        console.log("404.html - Original Pathname:", l.pathname);
        console.log("404.html - Search:", l.search);
        console.log("404.html - Hash:", l.hash);
        console.log("404.html - Base URL:", baseUrl);

        // í˜ì´ì§€ì— ë””ë²„ê¹… ì •ë³´ í‘œì‹œ
        document.addEventListener("DOMContentLoaded", function () {
          var debugInfo = document.getElementById("debug-info");
          if (debugInfo) {
            debugInfo.innerHTML =
              "<p><strong>ì›ë³¸ URL:</strong> " +
              l.href +
              "</p>" +
              "<p><strong>ê²½ë¡œ:</strong> " +
              l.pathname +
              "</p>" +
              "<p><strong>ì¿¼ë¦¬:</strong> " +
              l.search +
              "</p>" +
              "<p><strong>í•´ì‹œ:</strong> " +
              l.hash +
              "</p>";
          }
        });

        // ì‚¬ìš©ìê°€ ì ‘ê·¼í•˜ë ¤ë˜ ì „ì²´ ê²½ë¡œ
        var intendedPathAndQuery = l.pathname + l.search;
        var intendedHash = l.hash;

        // ê²½ë¡œ ì •ê·œí™”
        if (!intendedPathAndQuery.startsWith(baseUrl)) {
          if (l.pathname === "/" + ghPagesAppName) {
            intendedPathAndQuery = baseUrl + l.search;
          } else if (l.pathname.startsWith("/")) {
            intendedPathAndQuery =
              baseUrl +
              (intendedPathAndQuery.startsWith("/")
                ? intendedPathAndQuery.substring(1)
                : intendedPathAndQuery);
          } else {
            intendedPathAndQuery = baseUrl + intendedPathAndQuery;
          }
        }

        console.log("404.html - ì •ê·œí™”ëœ ê²½ë¡œ+ì¿¼ë¦¬:", intendedPathAndQuery);
        console.log("404.html - ì •ê·œí™”ëœ í•´ì‹œ:", intendedHash);

        try {
          // sessionStorageì— ì €ì¥
          sessionStorage.setItem("redirect-path-query", intendedPathAndQuery);
          sessionStorage.setItem("redirect-hash", intendedHash);
          console.log("404.html - sessionStorageì— ì €ì¥ ì™„ë£Œ");
        } catch (e) {
          console.warn("404.html - SessionStorage ì‚¬ìš© ë¶ˆê°€:", e);
        }

        // SPA ë£¨íŠ¸ë¡œ ë¦¬ë””ë ‰ì…˜
        var spaRootUrl =
          l.protocol +
          "//" +
          l.hostname +
          (l.port ? ":" + l.port : "") +
          baseUrl;

        console.log("404.html - SPA ë£¨íŠ¸ë¡œ ë¦¬ë””ë ‰ì…˜:", spaRootUrl);
        console.log("=== 404.html ë¦¬ë””ë ‰ì…˜ ì‹¤í–‰ ===");

        // 3ì´ˆ í›„ ë¦¬ë””ë ‰ì…˜ (ë””ë²„ê¹…ìš©)
        setTimeout(function () {
          window.location.replace(spaRootUrl);
        }, 1000);
      })();
    </script>
  </head>
  <body>
    <div
      style="
        font-family: Arial, sans-serif;
        text-align: center;
        margin-top: 50px;
        max-width: 600px;
        margin: 50px auto;
        padding: 20px;
      "
    >
      <h2>ğŸ“ 404 - SPA ë¼ìš°íŒ… ì²˜ë¦¬ ì¤‘...</h2>
      <p>í˜ì´ì§€ë¥¼ ì°¾ê³  ìˆìŠµë‹ˆë‹¤. ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”.</p>

      <div
        id="debug-info"
        style="
          background: #f5f5f5;
          padding: 15px;
          margin: 20px 0;
          border-radius: 5px;
          text-align: left;
        "
      >
        <h3>ë””ë²„ê¹… ì •ë³´:</h3>
        <!-- JavaScriptë¡œ ì±„ì›Œì§‘ë‹ˆë‹¤ -->
      </div>

      <div style="margin-top: 20px; font-size: 14px; color: #666">
        <p>
          ë§Œì•½ ì´ í˜ì´ì§€ê°€ ê³„ì† í‘œì‹œëœë‹¤ë©´,
          <a href="/easy-to-do/">ë©”ì¸ í˜ì´ì§€</a>ë¡œ ëŒì•„ê°€ì„¸ìš”.
        </p>
      </div>
    </div>
  </body>
</html>
