<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Easy To-Do - Redirecting...</title>
    <script type="text/javascript">
      // GitHub Pages SPA 라우팅을 위한 리다이렉트
      (function () {
        var l = window.location;
        var baseUrl = "/easy-to-do/";

        console.log("404.html - Current location:", l.href);
        console.log("404.html - Pathname:", l.pathname);

        // 현재 경로에서 서브패스 유지
        var currentPath = l.pathname;
        if (!currentPath.startsWith(baseUrl)) {
          currentPath =
            baseUrl +
            (currentPath.startsWith("/") ? currentPath.slice(1) : currentPath);
        }

        console.log("404.html - Final path:", currentPath);

        // 쿼리 파라미터와 해시 보존
        var queryString = l.search || "";
        var hash = l.hash || "";

        // 메인 페이지로 리다이렉트하면서 경로 정보를 세션 스토리지에 저장
        try {
          sessionStorage.setItem("redirect-path", currentPath);
          if (queryString) {
            sessionStorage.setItem("redirect-search", queryString);
          }
          if (hash) {
            sessionStorage.setItem("redirect-hash", hash);
          }
        } catch (e) {
          console.warn("SessionStorage not available:", e);
        }

        // 메인 페이지로 리다이렉트
        var redirectUrl = currentPath + queryString + hash;
        console.log("404.html - Redirecting to:", redirectUrl);
        window.location.replace(redirectUrl);
      })();
    </script>
  </head>
  <body>
    <div
      style="
        font-family: Arial, sans-serif;
        text-align: center;
        margin-top: 50px;
      "
    >
      <h2>Redirecting...</h2>
      <p>페이지를 찾고 있습니다. 잠시만 기다려주세요.</p>
    </div>
  </body>
</html>
